---
lang: ru-RU
title: Сетевые технологии
subtitle: Лабораторная работа №6
author:
  - Элсаиед Адел
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 21 января 2026

babel-lang: russian
babel-otherlangs: english

toc: false
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
---

# Цели и задачи работы

## Цель лабораторной работы
Настройка адресации **IPv4** и **IPv6** в среде **GNS3** и исследование режима **двойного стека**:
- построение топологии с двумя подсетями IPv4 и IPv6
- настройка адресации на оконечных узлах и маршрутизаторах **FRR** (IPv4) и **VyOS** (IPv6)
- проверка связности `ping` и `trace`
- анализ трафика **ARP**, **ICMP**, **ICMPv6** в Wireshark
- проверка изоляции подсетей IPv4 и IPv6 (кроме Dual Stack Server)

# Ход выполнения работы

## Топология сети и именование устройств
- Размещены устройства и выполнены соединения согласно топологии
- Принята схема именования:
  - коммутаторы: `msk-elsaiedadel-sw-0x`
  - маршрутизаторы: `msk-elsaiedadel-gw-0x`
  - VPCS: `PCx-elsaiedadel`
- Включён захват трафика на линии **Dual Stack Server ↔ ближайший коммутатор**

![Топология сети (IPv4 + IPv6 + Dual Stack Server)](Screenshot_1.png){ width=80% }

## IPv4-адресация на PC1
- Назначен адрес `172.16.20.10/25`
- Шлюз по умолчанию `172.16.20.1`
- Конфигурация сохранена

![Настройка IPv4 на PC1](Screenshot_2.png){ width=80% }

## IPv4-адресация на PC2
- Назначен адрес `172.16.20.138/25`
- Шлюз по умолчанию `172.16.20.129`
- Конфигурация сохранена

![Настройка IPv4 на PC2](Screenshot_3.png){ width=80% }

## IPv4-адресация на Dual Stack Server
- Назначен адрес `64.100.1.10/24`
- Шлюз по умолчанию `64.100.1.1`
- Конфигурация сохранена

![Настройка IPv4 на сервере](Screenshot_4.png){ width=80% }

## Настройка FRR (msk-elsaiedadel-gw-01)
- Установлен `hostname: msk-elsaiedadel-gw-01`
- Назначены адреса на интерфейсы:
  - `eth0: 172.16.20.1/25`
  - `eth1: 172.16.20.129/25`
  - `eth2: 64.100.1.1/24`
- Интерфейсы включены, конфигурация сохранена

![Конфигурация IPv4 на FRR](Screenshot_5.png){ width=80% }

## Проверка конфигурации FRR
- Проверены текущие настройки и состояние интерфейсов
- Подтверждены корректные адреса и статус `up`

![Просмотр running-config FRR](Screenshot_6.png){ width=80% }

## Проверка интерфейсов FRR
- Подтверждён список интерфейсов и назначенные адреса

![show interface brief FRR](Screenshot_7.png){ width=80% }

## Проверка связности IPv4 (PC1 ↔ PC2)
- Выполнен `ping` между узлами PC1 и PC2
- Маршрут подтверждён средствами трассировки

![Проверка связи PC1 ↔ PC2 (IPv4)](Screenshot_8.png){ width=80% }

## Проверка доступности Dual Stack Server (IPv4)
- С PC2 выполнен `ping` до `64.100.1.10`
- Подтверждена корректная маршрутизация через FRR

![Проверка связи PC2 → Dual Stack Server (IPv4)](Screenshot_9.png){ width=80% }

## IPv6-адресация на PC3
- Назначен адрес `2001:db8:c0de:12::a/64`
- Конфигурация сохранена

![Настройка IPv6 на PC3](Screenshot_10.png){ width=80% }

## IPv6-адресация на PC4
- Назначен адрес `2001:db8:c0de:13::a/64`
- Конфигурация сохранена

![Настройка IPv6 на PC4](Screenshot_11.png){ width=80% }

## IPv6-адресация на Dual Stack Server
- Назначен адрес `2001:db8:c0de:11::a/64`
- Конфигурация сохранена

![Настройка IPv6 на сервере](Screenshot_12.png){ width=80% }

## Установка и первичная настройка VyOS (msk-elsaiedadel-gw-02)
- Выполнена установка системы на VyOS и перезагрузка
- Установлен `host-name: msk-elsaiedadel-gw-02`
- Выполнено применение и сохранение конфигурации (`commit`, `save`)

![Настройка host-name и переход в конфигурирование VyOS](Screenshot_13.png){ width=80% }

## Назначение IPv6 на интерфейсы VyOS и Router Advertisement
- `eth0: 2001:db8:c0de:12::1/64` + RA для `2001:db8:c0de:12::/64`
- `eth1: 2001:db8:c0de:13::1/64` + RA для `2001:db8:c0de:13::/64`
- `eth2: 2001:db8:c0de:11::1/64` + RA для `2001:db8:c0de:11::/64`
- Выполнены `commit` и `save`, проверены интерфейсы

![Просмотр интерфейсов VyOS (show interfaces)](Screenshot_14.png){ width=80% }

## Проверка связности IPv6 (PC3)
- Выполнен `ping`/`trace` в IPv6-подсети
- Подтверждено прохождение через шлюз VyOS

![Проверка IPv6-связности с PC3](Screenshot_15.png){ width=80% }

## Проверка связности IPv6 (PC4)
- Выполнен `ping`/`trace` до узлов и сервера
- Подтверждена корректная маршрутизация в IPv6

![Проверка IPv6-связности с PC4](Screenshot_16.png){ width=80% }

## Проверка изоляции IPv4 и IPv6 подсетей
- Подтверждено, что узлы IPv4-подсети недоступны напрямую из IPv6-подсети и наоборот
- Dual Stack Server является единственным узлом, имеющим доступ к обеим подсетям

![Проверка доступности обеих подсетей для Dual Stack Server](Screenshot_17.png){ width=80% }

# Анализ трафика

## ICMP (IPv4) на линии Dual Stack Server ↔ switch
Из перехвата можно извлечь:
- тип ICMP (Echo Request/Reply), идентификатор и номер последовательности
- TTL (косвенно отражает число переходов)
- признаки корректной доставки (наличие ответа)

![ICMP-трафик IPv4](Screenshot_18.png){ width=80% }

## ICMPv6 на линии Dual Stack Server ↔ switch
Из перехвата можно извлечь:
- тип ICMPv6 (Echo Request/Reply)
- Hop Limit (аналог TTL)
- идентификатор/sequence для сопоставления запросов и ответов

![ICMPv6-трафик](Screenshot_19.png){ width=80% }

## ARP на линии Dual Stack Server ↔ switch
Из перехвата можно извлечь:
- соответствие IPv4 ↔ MAC (разрешение адресов)
- запрашиваемый целевой IPv4-адрес (обычно адрес шлюза)
- MAC/IP отправителя и формат ARP-запроса/ответа

![ARP-трафик](Screenshot_20.png){ width=80% }

# Самостоятельное задание

## Топология с двумя локальными подсетями
- Маршрутизатор VyOS разделяет сеть на 2 подсети IPv4/IPv6
- Выполнено адресное планирование и настройка двойного стека

![Топология самостоятельного задания](Screenshot_21.png){ width=80% }

## Проверка конфигурации узлов (PC1)
- Назначены IPv4/IPv6 адреса согласно таблице адресации
- Проверены параметры `show ip` и `show ipv6`

![Конфигурация на PC1 (IPv4/IPv6)](Screenshot_22.png){ width=80% }

## Проверка конфигурации узлов (PC2)
- Назначены IPv4/IPv6 адреса согласно таблице адресации
- Проверены параметры `show ip` и `show ipv6`

![Конфигурация на PC2 (IPv4/IPv6)](Screenshot_23.png){ width=80% }

## Настройка VyOS для двух подсетей
- На интерфейсах маршрутизатора использованы минимальные адреса в подсети
- Настроены IPv4/IPv6 адреса и Router Advertisement
- Конфигурация применена и сохранена

![Настройка VyOS (2 подсети)](Screenshot_24.png){ width=80% }

## Проверка связности (IPv4) — ping/trace
- Выполнены проверки доступности между узлами разных подсетей
- Трассировка подтверждает прохождение через маршрутизатор

![Проверка IPv4 (ping/trace)](Screenshot_25.png){ width=80% }

## Проверка связности (IPv6) — ping/trace
- Выполнены проверки доступности по IPv6
- Трассировка подтверждает корректную маршрутизацию между префиксами

![Проверка IPv6 (ping/trace)](Screenshot_26.png){ width=80% }

# Итоги

## Заключение
- Построена и настроена модель сети с **IPv4** и **IPv6** в режиме **dual stack**
- Выполнена настройка адресации на VPCS и маршрутизаторах **FRR** и **VyOS**
- Проверена связность с помощью `ping` и `trace` для IPv4 и IPv6
- Подтверждена изоляция IPv4 и IPv6 подсетей (кроме сервера двойного стека)
- Выполнен захват и анализ трафика **ARP**, **ICMP**, **ICMPv6** в Wireshark
- Для самостоятельного задания выполнено адресное планирование и проверена работоспособность сети
