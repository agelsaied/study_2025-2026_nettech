---
title: "Отчёт по лабораторной работе 6"
subtitle: "Адресация IPv4 и IPv6. Двойной стек"
author: "Элсаиед Адел"

lang: ru-RU
toc-title: "Содержание"

bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a
documentclass: scrreprt

polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english

babel-lang: russian
babel-otherlangs: english

mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math

mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9

biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric

figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"

indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Изучение принципов распределения и настройки адресного пространства на устройствах сети.

# Выполнение работы

## Разбиение IPv4-сети на подсети

### Разбиение сети 172.16.20.0/24 на подсети

Задана IPv4-сеть `172.16.20.0/24`. Для данной сети определены основные характеристики.

- Префикс сети: `/24`
- Маска подсети: `255.255.255.0`
- Адрес сети: `172.16.20.0`
- Широковещательный адрес: `172.16.20.255`
- Диапазон адресов узлов: `172.16.20.1 – 172.16.20.254`
- Общее число адресов: 256
- Число доступных адресов узлов: 254

Требуется разбить исходную сеть на три подсети с максимально возможным числом адресов узлов **126, 62 и 62**. Разбиение выполнено с использованием метода VLSM, начиная с подсети наибольшего размера.

**Подсеть 1 (126 узлов):**
- Адрес сети: `172.16.20.0/25`
- Маска подсети: `255.255.255.128`
- Диапазон адресов узлов: `172.16.20.1 – 172.16.20.126`
- Широковещательный адрес: `172.16.20.127`
- Число доступных узлов: 126

**Подсеть 2 (62 узла):**
- Адрес сети: `172.16.20.128/26`
- Маска подсети: `255.255.255.192`
- Диапазон адресов узлов: `172.16.20.129 – 172.16.20.190`
- Широковещательный адрес: `172.16.20.191`
- Число доступных узлов: 62

**Подсеть 3 (62 узла):**
- Адрес сети: `172.16.20.192/26`
- Маска подсети: `255.255.255.192`
- Диапазон адресов узлов: `172.16.20.193 – 172.16.20.254`
- Широковещательный адрес: `172.16.20.255`
- Число доступных узлов: 62

### Выделение подсети на 30 узлов в сети 10.10.1.64/26

Задана сеть `10.10.1.64/26`. Для данной сети определены следующие характеристики:

- Префикс сети: `/26`
- Маска подсети: `255.255.255.192`
- Адрес сети: `10.10.1.64`
- Широковещательный адрес: `10.10.1.127`
- Диапазон адресов узлов: `10.10.1.65 – 10.10.1.126`
- Число доступных адресов узлов: 62

Для размещения 30 узлов выбран префикс `/27`, обеспечивающий 32 адреса, из которых 30 доступны для хостов.

**Выделенная подсеть:**
- Адрес сети: `10.10.1.64/27`
- Маска подсети: `255.255.255.224`
- Диапазон адресов узлов: `10.10.1.65 – 10.10.1.94`
- Широковещательный адрес: `10.10.1.95`
- Число доступных узлов: 30

### Выделение подсети на 14 узлов в сети 10.10.1.0/26

Задана сеть `10.10.1.0/26`. Основные характеристики сети:

- Префикс сети: `/26`
- Маска подсети: `255.255.255.192`
- Адрес сети: `10.10.1.0`
- Широковещательный адрес: `10.10.1.63`
- Диапазон адресов узлов: `10.10.1.1 – 10.10.1.62`
- Число доступных адресов узлов: 62

Для размещения 14 узлов выбран префикс `/28`, обеспечивающий 16 адресов, из которых 14 доступны для использования.

**Выделенная подсеть:**
- Адрес сети: `10.10.1.0/28`
- Маска подсети: `255.255.255.240`
- Диапазон адресов узлов: `10.10.1.1 – 10.10.1.14`
- Широковещательный адрес: `10.10.1.15`
- Число доступных узлов: 14

## Разбиение IPv6-сети на подсети

### Разбиение сети 2001:db8:c0de::/48

Задана IPv6-сеть `2001:db8:c0de::/48`. Данный адрес относится к глобальной (global unicast) IPv6-адресации, при этом префикс `2001:db8::/32` зарезервирован для документации и учебных примеров, что делает его пригодным для лабораторных работ.

**Характеристики сети:**
- Префикс сети: `/48`
- Маска (в двоичном виде): 48 старших бит фиксированы, оставшиеся 80 бит — изменяемая часть
- Адрес сети (network prefix): `2001:db8:c0de::`
- Длина адреса IPv6: 128 бит

**Диапазон адресов в пределах префикса `/48` (краевые значения):**
- Минимальный адрес в сети: `2001:db8:c0de:0000:0000:0000:0000:0000`
- Максимальный адрес в сети: `2001:db8:c0de:ffff:ffff:ffff:ffff:ffff`

В IPv6 отсутствует широковещательная (broadcast) адресация; для рассылки используется мультикаст. Также в IPv6 не выделяются отдельные “адрес сети” и “broadcast” так, как это принято в IPv4: весь диапазон префикса потенциально адресуем, однако в практической адресации используются соглашения (например, `::1` для маршрутизатора, SLAAC и т.д.).

#### Разбиение на 2 подсети с использованием идентификатора подсети

Наиболее типовой подход: из префикса `/48` формируют “обычные” пользовательские подсети `/64`, выделяя 16 бит под **идентификатор подсети** (Subnet ID).  
То есть структура выглядит так:

- `/48` — глобальный префикс организации
- следующие 16 бит — Subnet ID
- последние 64 бита — Interface ID

Для получения 2 подсетей достаточно изменить **старший бит** в поле Subnet ID. Это эквивалентно переходу от `/48` к `/49`, где 1 дополнительный бит определяет одну из двух половин пространства.

**Вариант разбиения на две подсети `/49`:**
- Подсеть 1: `2001:db8:c0de:0000::/49`
- Подсеть 2: `2001:db8:c0de:8000::/49`

**Пояснение:**
- В `/49` добавляется 1 бит к префиксу `/48`.
- Значение этого бита `0` даёт первую половину адресного пространства, значение `1` — вторую половину.
- Такой способ удобен для грубого деления адресного пространства организации на два крупных блока (например, для двух филиалов или двух крупных доменов маршрутизации).

При необходимости можно делить именно на “классические” `/64` подсети, выбрав, например, Subnet ID `0000` и `0001`:

- Подсеть 1: `2001:db8:c0de:0000::/64`
- Подсеть 2: `2001:db8:c0de:0001::/64`

Этот вариант ближе к реальной практике адресации LAN-сегментов.

#### Разбиение на 2 подсети с использованием идентификатора интерфейса

Альтернативный подход — разделить сеть, изменяя границу префикса в области **Interface ID** (то есть “урезать” часть 64-битного идентификатора интерфейса и использовать её как дополнительный признак подсети).

Если исходно предполагается, что внутри подсети используется `/64`, то разбиение на две части может быть выполнено, например, переходом к `/65`:

- первые 64 бита по-прежнему включают глобальный префикс и Subnet ID;
- **65-й бит** (первый бит в Interface ID) используется как признак “подсети 0/1”.

Для этого сначала выбирается конкретная `/64` подсеть внутри `/48`, например `2001:db8:c0de:0000::/64`, после чего она делится на две “половины”:

- Подсеть 1: `2001:db8:c0de:0000::/65`
- Подсеть 2: `2001:db8:c0de:0000:8000::/65`

**Пояснение:**
- `/65` означает, что 65 бит фиксированы, а изменяемых остаётся 63 бита.
- Первая подсеть соответствует значениям 65-го бита `0`, вторая — `1`.
- Подход теоретически возможен, но на практике используется редко, так как стандартные механизмы автоконфигурации (SLAAC) ориентированы на `/64`, а изменение длины префикса может приводить к нестандартному поведению или ограничениям оборудования.

### Разбиение сети 2a02:6b8::/64

Задана IPv6-сеть `2a02:6b8::/64`. Данный адрес относится к глобальной IPv6-адресации. Префикс `/64` является типовым размером подсети для локальных сегментов IPv6 и рекомендован для SLAAC.

**Характеристики сети:**
- Префикс сети: `/64`
- Маска: 64 старших бита фиксированы, 64 бита — идентификатор интерфейса
- Адрес сети (network prefix): `2a02:6b8:0000:0000::`

**Диапазон адресов в пределах префикса `/64` (краевые значения):**
- Минимальный адрес в сети: `2a02:6b8:0000:0000:0000:0000:0000:0000`
- Максимальный адрес в сети: `2a02:6b8:0000:0000:ffff:ffff:ffff:ffff`

#### Разбиение на 2 подсети с использованием идентификатора подсети

Так как сеть уже имеет длину `/64`, “классический” Subnet ID (как в случае `/48 → /64`) отсутствует: весь Subnet ID уже зафиксирован в первых 64 битах.  
Тем не менее, разделить адресное пространство на два блока можно, увеличив длину префикса до `/65` (то есть фактически использовать один бит из Interface ID как “идентификатор подсети”).

В результате получаются две подсети:

- Подсеть 1: `2a02:6b8::/65`
- Подсеть 2: `2a02:6b8:0:0:8000::/65`

**Пояснение:**
- В пределах `/64` добавляется один бит, разделяющий пространство Interface ID на две половины.
- Адреса в первой подсети имеют старший бит Interface ID равный `0`, во второй — `1`.

#### Разбиение на 2 подсети с использованием идентификатора интерфейса

Разбиение “по идентификатору интерфейса” по сути совпадает с предыдущим случаем, так как при исходном `/64` единственное место, откуда можно взять бит для деления, — это поле Interface ID. Поэтому второй способ можно представить как явное выделение диапазонов Interface ID.

Пусть:
- Подсеть 1 соответствует диапазону Interface ID: `0000:0000:0000:0000` – `7fff:ffff:ffff:ffff`
- Подсеть 2 соответствует диапазону Interface ID: `8000:0000:0000:0000` – `ffff:ffff:ffff:ffff`

Тогда разбиение будет:

- Подсеть 1: `2a02:6b8:0:0:0000::/65`
- Подсеть 2: `2a02:6b8:0:0:8000::/65`

**Пояснение:**
- Деление выполнено по старшему биту 64-битного идентификатора интерфейса.
- Способ является формально корректным, но практически нежелательным для типовых LAN-сегментов, поскольку нарушает стандартное ожидание `/64` для SLAAC и может привести к проблемам совместимости.

## Настройка двойного стека адресации IPv4 и IPv6 в локальной сети

1. Выполнен запуск виртуальной машины **GNS3 VM**, после чего произведён запуск программного комплекса **GNS3**. В рабочей среде создан новый проект для выполнения лабораторной работы, посвящённой настройке адресации IPv4 и IPv6 в сети с двойным стеком.

2. В рабочем пространстве GNS3 размещены сетевые устройства и выполнено их соединение в соответствии с заданной топологией. Для сегмента сети с IPv4 использован маршрутизатор **FRR**, для сегмента IPv6 — маршрутизатор **VyOS**. Топология включает рабочие станции, коммутаторы, маршрутизаторы и сервер с поддержкой двойного стека адресации.

   ![Топология сети в среде GNS3](Screenshot_1.png){ #fig:601 width=80% }

3. Произведено изменение отображаемых имён сетевых устройств. Коммутаторы переименованы по шаблону `msk-elsaiedadel-sw-0x`, маршрутизаторы — `msk-elsaiedadel-gw-0x`, рабочие станции VPCS — `PCx-elsaiedadel`, что обеспечивает однозначную идентификацию узлов в рамках лабораторной работы.

4. В соответствии с таблицей адресации выполнена настройка IPv4-параметров на рабочей станции **PC1**. Узлу назначен IP-адрес `172.16.20.10/25` с указанием шлюза по умолчанию `172.16.20.1`. После настройки конфигурация сохранена, а параметры проверены с использованием команды просмотра сетевых настроек.

   ![Настройка IPv4-адресации на узле PC1](Screenshot_2.png){ #fig:602 width=80% }

5. Аналогичным образом выполнена настройка IPv4-адресации на рабочей станции **PC2**. Узлу назначен IP-адрес `172.16.20.138/25` и шлюз `172.16.20.129`. Конфигурация сохранена и подтверждена командой отображения текущих сетевых параметров.

   ![Настройка IPv4-адресации на узле PC2](Screenshot_3.png){ #fig:603 width=80% }

6. На сервере с двойным стеком адресации выполнена настройка IPv4-параметров. Серверу присвоен IP-адрес `64.100.1.10/24` с указанием шлюза по умолчанию `64.100.1.1`. После завершения настройки конфигурация сохранена и успешно проверена.

   ![Настройка IPv4-адресации на сервере](Screenshot_4.png){ #fig:604 width=80% }

7. На маршрутизаторе **FRR** выполнена настройка IPv4-адресации интерфейсов локальной сети. Устройству задано имя `msk-elsaiedadel-gw-01`. Интерфейсу `eth0` назначен адрес `172.16.20.1/25`, интерфейсу `eth1` — `172.16.20.129/25`, интерфейсу `eth2` — `64.100.1.1/24`. Все интерфейсы переведены в активное состояние, а конфигурация сохранена во внутренней памяти маршрутизатора.

   ![Настройка IPv4-интерфейсов маршрутизатора FRR](Screenshot_5.png){ #fig:605 width=80% }

8. Выполнена проверка текущей конфигурации маршрутизатора **msk-elsaiedadel-gw-01**. Подтверждено наличие заданных IP-адресов и корректное состояние сетевых интерфейсов.

   ![Просмотр текущей конфигурации маршрутизатора FRR](Screenshot_6.png){ #fig:606 width=80% }

   ![Состояние интерфейсов маршрутизатора FRR](Screenshot_7.png){ #fig:607 width=80% }

9. Для проверки связности сети выполнено тестирование с использованием ICMP-эхо-запросов и трассировки маршрута. С рабочей станции **PC1** успешно выполнена проверка доступности узла **PC2**, а также подтверждён корректный маршрут прохождения пакетов через маршрутизатор.

   ![Проверка связности между PC1 и PC2](Screenshot_8.png){ #fig:608 width=80% }

10. Дополнительно выполнена проверка доступности сервера с двойным стеком адресации с рабочей станции **PC2**. Узел успешно отвечает на ICMP-запросы, что подтверждает корректность настройки IPv4-адресации и маршрутизации в сети.

   ![Проверка доступности сервера с узла PC2](Screenshot_9.png){ #fig:609 width=80% }

11. В соответствии с таблицей адресации выполнена настройка IPv6-адресов на узлах **PC3**, **PC4** и сервере с двойным стеком адресации.  
   На узле **PC3** назначен IPv6-адрес `2001:db8:c0de:12::a/64`.  
   На узле **PC4** настроен IPv6-адрес `2001:db8:c0de:13::a/64`.  
   Серверу двойного стека присвоен IPv6-адрес `2001:db8:c0de:11::a/64`.  
   После ввода параметров конфигурация на каждом узле сохранена.

   ![Настройка IPv6-адресации на узле PC3](Screenshot_10.png){ #fig:610 width=80% }

   ![Настройка IPv6-адресации на узле PC4](Screenshot_11.png){ #fig:611 width=80% }

   ![Настройка IPv6-адресации на сервере](Screenshot_12.png){ #fig:612 width=80% }

12. На рабочих станциях **PC3** и **PC4** выполнена проверка параметров сетевой конфигурации. Подтверждено наличие как link-local, так и global IPv6-адресов, а также корректное отсутствие IPv4-связности для данных узлов.

13. На маршрутизаторе **VyOS** выполнена установка системы с последующей перезагрузкой устройства. После запуска маршрутизатора произведён переход в режим конфигурирования и изменено имя устройства на `msk-elsaiedadel-gw-02`. Конфигурация зафиксирована и сохранена.

14. Выполнена настройка IPv6-адресации интерфейсов локальной сети маршрутизатора **msk-elsaiedadel-gw-02**.  
    Интерфейсу `eth0` назначен адрес `2001:db8:c0de:12::1/64`, интерфейсу `eth1` — `2001:db8:c0de:13::1/64`, интерфейсу `eth2` — `2001:db8:c0de:11::1/64`.  
    Для каждого интерфейса настроена рассылка Router Advertisement с соответствующим IPv6-префиксом. Конфигурация применена и сохранена.

   ![Настройка IPv6-адресов и Router Advertisement на VyOS](Screenshot_13.png){ #fig:613 width=80% }

   ![Просмотр конфигурации интерфейсов маршрутизатора VyOS](Screenshot_14.png){ #fig:614 width=80% }

15. Выполнена проверка связности IPv6-сети с использованием команд проверки доступности и трассировки маршрута. Узлы **PC3** и **PC4** успешно обмениваются ICMPv6-эхо-запросами между собой и с сервером двойного стека, что подтверждает корректную настройку IPv6-адресации и маршрутизации.

   ![Проверка IPv6-связности с узла PC3](Screenshot_15.png){ #fig:615 width=80% }

   ![Проверка IPv6-связности с узла PC4](Screenshot_16.png){ #fig:616 width=80% }

16. Дополнительно выполнена проверка изоляции подсетей IPv4 и IPv6. Подтверждено, что устройства из IPv4-подсети не имеют доступа к узлам IPv6-подсети и наоборот. Связность между обеими подсетями обеспечивается исключительно сервером с двойным стеком адресации.

   ![Проверка доступа сервера двойного стека к IPv4 и IPv6 подсетям](Screenshot_17.png){ #fig:617 width=80% }

## Анализ захваченного трафика ARP, ICMP и ICMPv6

14. На соединении между сервером с двойным стеком адресации и ближайшим к нему коммутатором выполнен захват сетевого трафика с использованием встроенных средств анализа пакетов. В процессе захвата зафиксированы пакеты протоколов **ARP**, **ICMP** и **ICMPv6**, что позволило проанализировать особенности функционирования IPv4- и IPv6-сетей, а также взаимодействие узлов в среде с двойным стеком.

   ![Анализ ICMP-трафика IPv4](Screenshot_18.png){ #fig:618 width=80% }

   При анализе ICMP-пакетов IPv4 установлено, что сервер с адресом `64.100.1.10` и узел `172.16.20.10` успешно обмениваются эхо-запросами и эхо-ответами. Из заголовков IPv4 можно извлечь следующую информацию:
   - IP-адрес источника и назначения, что позволяет определить направление передачи пакета;
   - значение поля **TTL**, уменьшающееся при прохождении через маршрутизаторы и отражающее количество оставшихся переходов;
   - идентификаторы и порядковые номера ICMP-пакетов, используемые для сопоставления запросов и ответов;
   - корректность контрольных сумм, подтверждающая целостность переданных данных.
   Данный трафик подтверждает корректную работу IPv4-маршрутизации между подсетями.

   ![Анализ ICMPv6-трафика](Screenshot_19.png){ #fig:619 width=80% }

   Анализ ICMPv6-пакетов показал успешный обмен эхо-запросами и ответами между IPv6-узлами с адресами `2001:db8:c0de:12::a` и `2001:db8:c0de:11::a`. Из перехваченных ICMPv6-пакетов можно получить следующую информацию:
   - глобальные IPv6-адреса источника и назначения;
   - тип сообщения ICMPv6 (Echo Request и Echo Reply);
   - значение поля **Hop Limit**, аналогичное TTL в IPv4;
   - идентификаторы и номера последовательности, позволяющие отслеживать порядок доставки пакетов.
   Данный трафик подтверждает корректную работу IPv6-адресации и маршрутизации в соответствующей подсети.

   ![Анализ ARP-трафика](Screenshot_20.png){ #fig:620 width=80% }

   В ходе анализа ARP-трафика установлено, что сервер с IPv4-адресом `64.100.1.10` выполняет широковещательный ARP-запрос с целью определения MAC-адреса шлюза `64.100.1.1`. В ARP-пакетах содержится следующая информация:
   - аппаратный тип и тип протокола, указывающие на использование Ethernet и IPv4;
   - MAC-адрес отправителя и его IPv4-адрес;
   - целевой IPv4-адрес, для которого требуется определить MAC-адрес;
   - широковещательный MAC-адрес назначения, используемый для рассылки запроса всем устройствам в сегменте сети.
   Данный процесс подтверждает стандартный механизм разрешения IPv4-адресов в MAC-адреса перед началом передачи ICMP-трафика.

## Самостоятельное задание

1. В среде GNS3 подготовлена топология сети с двумя локальными подсетями, разделёнными маршрутизатором **VyOS**. В состав схемы включены два оконечных узла (**PC1**, **PC2**), два коммутатора уровня доступа и один маршрутизатор, обеспечивающий маршрутизацию между подсетями и работу протоколов IPv4/IPv6 в режиме двойного стека.

   ![Топология сети с двумя локальными подсетями](Screenshot_21.png){ #fig:621 width=80% }

2. Выполнена характеристика заданных подсетей IPv4 и IPv6, определены диапазоны адресов, входящих в каждую подсеть, а также выделены служебные (сетевой и широковещательный) адреса для IPv4.

   **Подсеть 1 (IPv4): `10.10.1.96/27`**  
   Маска подсети: `/27` (255.255.255.224), размер подсети — 32 адреса, число пригодных адресов для узлов — 30.  
   - Сетевой адрес: `10.10.1.96`  
   - Диапазон адресов узлов: `10.10.1.97` – `10.10.1.126`  
   - Широковещательный адрес: `10.10.1.127`  
   Таким образом, в данную подсеть входят все адреса от `10.10.1.96` до `10.10.1.127`, при этом `10.10.1.96` является адресом сети, а `10.10.1.127` — broadcast-адресом.

   **Подсеть 2 (IPv4): `10.10.1.16/28`**  
   Маска подсети: `/28` (255.255.255.240), размер подсети — 16 адресов, число пригодных адресов для узлов — 14.  
   - Сетевой адрес: `10.10.1.16`  
   - Диапазон адресов узлов: `10.10.1.17` – `10.10.1.30`  
   - Широковещательный адрес: `10.10.1.31`  
   В данную подсеть входят все адреса от `10.10.1.16` до `10.10.1.31`, при этом `10.10.1.16` является адресом сети, а `10.10.1.31` — broadcast-адресом.

   **Подсеть 1 (IPv6): `2001:DB8:1:1::/64`**  
   Префикс `/64` содержит пространство адресов, в котором первые 64 бита фиксированы префиксом, а оставшиеся 64 бита используются как идентификатор интерфейса.  
   - Адресное пространство: `2001:db8:1:1::` – `2001:db8:1:1:ffff:ffff:ffff:ffff`  
   В IPv6 отсутствуют понятия broadcast-адреса; рассылки выполняются с использованием multicast.

   **Подсеть 2 (IPv6): `2001:DB8:1:4::/64`**  
   - Адресное пространство: `2001:db8:1:4::` – `2001:db8:1:4:ffff:ffff:ffff:ffff`  
   Аналогично первой подсети, адреса формируются в пределах префикса `/64`, при этом адреса рассылок выполняются через multicast.

3. Предложен вариант таблицы адресации для заданной топологии и адресного пространства. Для интерфейсов маршрутизатора выбран **наименьший доступный адрес** в каждой подсети, что соответствует требованиям задания.

   **Таблица адресации (вариант):**
   - Маршрутизатор `msk-elsaiedadel-gw-01`, интерфейс к подсети 1 (eth0):  
     - IPv4: `10.10.1.97/27` (наименьший адрес узла в подсети `10.10.1.96/27`)  
     - IPv6: `2001:db8:1:1::1/64` (минимальный адрес для интерфейса маршрутизатора в префиксе)
   - Маршрутизатор `msk-elsaiedadel-gw-01`, интерфейс к подсети 2 (eth1):  
     - IPv4: `10.10.1.17/28` (наименьший адрес узла в подсети `10.10.1.16/28`)  
     - IPv6: `2001:db8:1:4::1/64`
   - Узел `PC1-elsaiedadel` (подсеть 1):  
     - IPv4: `10.10.1.100/27`, шлюз: `10.10.1.97`  
     - IPv6: `2001:db8:1:1::a/64`, шлюз по умолчанию формируется через Router Advertisement
   - Узел `PC2-elsaiedadel` (подсеть 2):  
     - IPv4: `10.10.1.20/28`, шлюз: `10.10.1.17`  
     - IPv6: `2001:db8:1:4::a/64`, шлюз по умолчанию формируется через Router Advertisement

4. На оконечных устройствах выполнена проверка текущей конфигурации IPv4 и IPv6. Подтверждено, что:
   - **PC1** использует IPv4-адрес `10.10.1.100/27` и шлюз `10.10.1.97`, а также имеет IPv6-адрес `2001:db8:1:1::a/64` и link-local адрес.
   - **PC2** использует IPv4-адрес `10.10.1.20/28` и шлюз `10.10.1.17`, а также имеет IPv6-адрес `2001:db8:1:4::a/64` и link-local адрес.

   ![Проверка конфигурации IPv4 и IPv6 на узле PC1](Screenshot_22.png){ #fig:622 width=80% }

   ![Проверка конфигурации IPv4 и IPv6 на узле PC2](Screenshot_23.png){ #fig:623 width=80% }

5. На маршрутизаторе **VyOS** выполнена настройка IP-адресации интерфейсов для обеих подсетей. На каждом интерфейсе задан минимальный адрес узла в соответствующей IPv4-подсети и минимальный IPv6-адрес для маршрутизатора в соответствующем префиксе. Дополнительно настроена рассылка Router Advertisement для IPv6, что обеспечивает автоматическое получение маршрута по умолчанию на оконечных узлах.

   В рамках настройки:
   - для интерфейса `eth0` назначены адреса `10.10.1.97/27` и `2001:db8:1:1::1/64`, а также включена рассылка префикса `2001:db8:1:1::/64`;
   - для интерфейса `eth1` назначены адреса `10.10.1.17/28` и `2001:db8:1:4::1/64`, а также включена рассылка префикса `2001:db8:1:4::/64`.
   Конфигурация применена и сохранена.

   ![Настройка IPv4/IPv6-адресов и Router Advertisement на маршрутизаторе VyOS](Screenshot_24.png){ #fig:624 width=80% }

6. Выполнена проверка связности между устройствами подсети с помощью команд `ping` и `trace`.

   При проверке IPv4-связности установлено, что узел **PC1** успешно отправляет ICMP-эхо-запросы на **PC2**. Результаты трассировки подтверждают прохождение трафика через шлюз подсети `10.10.1.97`, после чего достигается целевой узел `10.10.1.20`. Наличие промежуточного перехода указывает на корректную работу маршрутизатора как устройства, разделяющего подсети.

   ![Проверка IPv4-связности между PC1 и PC2](Screenshot_25.png){ #fig:625 width=80% }

   При проверке IPv6-связности установлено, что узел **PC2** успешно отправляет ICMPv6-эхо-запросы на узел **PC1** (адрес `2001:db8:1:1::a`). Трассировка маршрута показывает прохождение пакетов через IPv6-адрес маршрутизатора в подсети 2 (`2001:db8:1:4::1`) с последующей доставкой до узла назначения в подсети 1, что подтверждает корректную маршрутизацию IPv6 между сегментами.

   ![Проверка IPv6-связности между PC2 и PC1](Screenshot_26.png){ #fig:626 width=80% }


# Заключение

В ходе выполнения лабораторной работы были изучены принципы адресного планирования и разбиения сетей IPv4 и IPv6 на подсети. Для IPv4-сетей отработаны методы классического разбиения с использованием переменной длины префикса (VLSM), что позволило получить подсети с заданным числом узлов и рационально использовать адресное пространство. Определены основные характеристики подсетей, включая адрес сети, маску, диапазон адресов узлов и широковещательный адрес.

При работе с IPv6-адресацией рассмотрены особенности структуры IPv6-адреса, роль префикса, идентификатора подсети и идентификатора интерфейса. Выполнено разбиение IPv6-сетей различной длины префикса, проанализированы как рекомендуемые на практике способы адресации, так и формально допустимые, но ограниченно применяемые варианты.

Полученные результаты позволили закрепить навыки анализа адресного пространства, обоснованного выбора длины префикса и понимания различий между подходами к адресации в IPv4 и IPv6. Работа способствует формированию практических умений проектирования сетей с эффективным использованием адресных ресурсов.
