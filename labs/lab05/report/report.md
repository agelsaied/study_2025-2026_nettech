---
title: "Отчёт по лабораторной работе 5"
subtitle: "Простые сети в GNS3. Анализ трафика"
author: "Элсаиед Адел"

lang: ru-RU
toc-title: "Содержание"

bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a
documentclass: scrreprt

polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english

babel-lang: russian
babel-otherlangs: english

mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math

mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9

biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric

figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"

indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Построение простейших моделей сети на базе коммутатора и маршрутизаторов FRR и VyOS в GNS3, анализ трафика посредством Wireshark.

# Выполнение работы

## Моделирование простейшей сети на базе коммутатора в GNS3

1. Запущены GNS3 VM и программный комплекс GNS3, после чего создан новый проект для выполнения лабораторной работы.

2. В рабочей области GNS3 размещены следующие сетевые устройства:
   - Ethernet-коммутатор;
   - два виртуальных оконечных устройства типа VPCS.

   Коммутатор переименован в `msk-elsaiedadel-sw-01`, а оконечные устройства — в `PC1-elsaiedadel` и `PC2-elsaiedadel`.  
   После переименования выполнено соединение VPCS с коммутатором. Для удобства анализа включено отображение обозначений интерфейсов соединения.

   ![Топология простейшей сети в GNS3](Screenshot_1.png){ #fig:011 width=80% }

3. После запуска первого оконечного устройства `PC1-elsaiedadel` открыт его терминал Console. Для ознакомления с доступными командами VPCS выполнен вывод справочной информации с помощью команды `?`, что позволило изучить синтаксис команд настройки IP-параметров и диагностики сети.

   ![Просмотр справки команд VPCS](Screenshot_2.png){ #fig:012 width=80% }

4. На втором оконечном устройстве `PC2-elsaiedadel` выполнена настройка сетевых параметров. Задан IP-адрес `192.168.1.12` с маской подсети `/24` и шлюзом по умолчанию `192.168.1.1`. После проверки корректности назначения адреса конфигурация сохранена в стартовый файл VPCS.

5. Для проверки работоспособности сети и корректности адресации выполнена проверка сетевой связности между узлами. В результате получены ответы без потерь пакетов, что подтверждает наличие сетевого соединения между оконечными устройствами.

   ![Проверка сетевой связности между PC1 и PC2](Screenshot_3.png){ #fig:013 width=80% }

6. По завершении эксперимента все узлы в проекте были корректно остановлены с использованием команды Stop all nodes в меню управления GNS3.

## Анализ трафика в GNS3 посредством Wireshark

1. На соединении между оконечным устройством `PC1-elsaiedadel` и Ethernet-коммутатором был запущен захват трафика. Для этого в рабочей области GNS3 выполнен щелчок правой кнопкой мыши по линии соединения и выбран пункт **Start capture**. В результате был автоматически запущен анализатор Wireshark, а на соединении в проекте появился индикатор активного захвата пакетов.

2. После запуска захвата трафика в проекте GNS3 выполнен запуск всех узлов с использованием команды **Start/Resume all nodes**. В окне Wireshark зафиксированы ARP-сообщения, инициированные оконечными устройствами при проверке и объявлении собственных IP-адресов. Наблюдаются Gratuitous ARP-запросы, рассылаемые в широковещательном режиме для обнаружения возможных конфликтов IP-адресов в сети.

   ![Анализ ARP-трафика в Wireshark](Screenshot_4.png){ #fig:014 width=80% }

   В расшифровке ARP-пакетов отображается MAC-адрес отправителя, IP-адрес источника и целевого узла, а также факт использования широковещательного MAC-адреса назначения, что соответствует стандартному механизму работы протокола ARP.

3. В терминале устройства `PC2-elsaiedadel` выполнен просмотр справки по параметрам команды `ping`, после чего сформирован одиночный эхо-запрос в ICMP-режиме к узлу `PC1-elsaiedadel`. В окне Wireshark зафиксированы ICMP Echo Request и Echo Reply сообщения.

   ![ICMP эхо-запрос и ответ](Screenshot_5.png){ #fig:015 width=80% }

   Анализ ICMP-пакетов показал, что запрос был отправлен от IP-адреса `192.168.1.12` к `192.168.1.11`, а в ответном пакете корректно возвращён Echo Reply, что подтверждает работоспособность сетевого взаимодействия.

4. Далее выполнен одиночный эхо-запрос в UDP-режиме к узлу `PC1-elsaiedadel`. В результате в Wireshark зафиксирован UDP-пакет, содержащий эхо-данные, переданные на порт назначения 7, который используется службой Echo.

   ![Эхо-запрос в UDP-режиме](Screenshot_6.png){ #fig:016 width=80% }

   В анализе пакета отображаются заголовки протоколов Ethernet, IPv4 и UDP, а также полезная нагрузка, содержащая данные эхо-запроса.

5. После этого выполнен одиночный эхо-запрос в TCP-режиме. В окне Wireshark зафиксирована последовательность TCP-сегментов, включающая установление соединения (SYN, SYN-ACK, ACK), передачу данных и завершение обмена.

   ![Эхо-запрос в TCP-режиме](Screenshot_7.png){ #fig:017 width=80% }

   Анализ TCP-трафика показал корректное установление соединения между узлами, передачу полезной нагрузки и подтверждение полученных данных, что соответствует стандартной логике работы протокола TCP.

6. По завершении анализа трафика захват пакетов в Wireshark был остановлен, после чего выполнение лабораторной работы завершено.

## Моделирование простейшей сети на базе маршрутизатора FRR в GNS3

1. Запущены GNS3 VM и среда моделирования GNS3. Создан новый проект для выполнения лабораторной работы.

2. В рабочей области GNS3 размещены следующие устройства:
   - оконечное устройство VPCS;
   - Ethernet-коммутатор;
   - маршрутизатор FRR.

   Сформирована топология сети, в которой VPCS подключён к коммутатору, а коммутатор — к маршрутизатору FRR.

   ![Топология сети с маршрутизатором FRR](Screenshot_9.png){ #fig:018 width=80% }

3. Выполнено переименование устройств в соответствии с заданными требованиями:
   - VPCS — `PC1-elsaiedadel`;
   - коммутатор — `msk-elsaiedadel-sw-01`;
   - маршрутизатор — `msk-elsaiedadel-gw-01`.

4. На соединении между коммутатором и маршрутизатором включён захват трафика для последующего анализа в Wireshark.

5. Все устройства проекта запущены. Для каждого узла открыта консоль управления.

6. На оконечном устройстве `PC1-elsaiedadel` выполнена настройка IP-адресации. Узлу присвоен IP-адрес `192.168.1.10` с маской `/24`, а в качестве шлюза по умолчанию указан адрес `192.168.1.1`. После этого конфигурация сохранена, и выполнен просмотр текущих сетевых параметров.

   ![Настройка IP-адресации VPCS](Screenshot_10.png){ #fig:019 width=80% }

7. На маршрутизаторе FRR выполнена базовая настройка. Задано имя устройства `msk-elsaiedadel-gw-01`, после чего на интерфейсе `eth0` настроен IP-адрес `192.168.1.1/24`. Интерфейс переведён в активное состояние, а конфигурация сохранена в постоянной памяти.

   ![Настройка интерфейса маршрутизатора FRR](Screenshot_11.png){ #fig:020 width=80% }

8. Для проверки корректности конфигурации маршрутизатора выполнен просмотр текущей конфигурации и состояния интерфейсов. В результате подтверждено, что интерфейс `eth0` находится в состоянии up и имеет корректно назначенный IP-адрес.

   ![Проверка конфигурации и интерфейсов FRR](Screenshot_12.png){ #fig:021 width=80% }

9. С оконечного устройства `PC1-elsaiedadel` выполнена проверка сетевой связности путём отправки ICMP эхо-запросов на адрес маршрутизатора `192.168.1.1`. Получены корректные ответы без потерь пакетов, что подтверждает работоспособность соединения.

   ![Проверка связи между PC и маршрутизатором](Screenshot_13.png){ #fig:022 width=80% }

10. В окне Wireshark проанализирован захваченный трафик. Зафиксированы ARP-запросы для определения MAC-адреса маршрутизатора, а также ICMP Echo Request и Echo Reply сообщения между узлом PC и маршрутизатором. Анализ пакетов подтверждает корректную работу протоколов ARP и ICMP в смоделированной сети.

    ![Анализ ARP и ICMP трафика в Wireshark](Screenshot_14.png){ #fig:023 width=80% }

11. По завершении анализа захват трафика в Wireshark остановлен. Все устройства в проекте корректно остановлены, выполнение лабораторной работы завершено.

## Моделирование простейшей сети на базе маршрутизатора VyOS в GNS3

1. Запущены GNS3 VM и программный комплекс GNS3. Создан новый проект для выполнения лабораторной работы.

2. В рабочей области GNS3 размещены следующие сетевые устройства:
   - оконечное устройство VPCS;
   - Ethernet-коммутатор;
   - маршрутизатор VyOS.

   Сформирована топология сети, в которой VPCS подключён к коммутатору, а коммутатор — к маршрутизатору VyOS.

   ![Топология сети с маршрутизатором VyOS](Screenshot_15.png){ #fig:024 width=80% }

3. Выполнено переименование устройств в соответствии с требованиями задания:
   - VPCS — `PC1-elsaiedadel`;
   - коммутатор — `msk-elsaiedadel-sw-01`;
   - маршрутизатор — `msk-elsaiedadel-gw-01`.

4. На соединении между коммутатором и маршрутизатором включён захват трафика для последующего анализа в Wireshark.

5. Все устройства проекта запущены, для каждого узла открыта консоль управления.

6. На оконечном устройстве `PC1-elsaiedadel` выполнена настройка IP-адресации. Узлу присвоен IP-адрес `192.168.1.10` с маской `/24`, в качестве шлюза по умолчанию указан адрес `192.168.1.1`. После этого конфигурация сохранена и выполнен просмотр текущих сетевых параметров.

   ![Настройка IP-адресации VPCS](Screenshot_16.png){ #fig:025 width=80% }

7. После загрузки маршрутизатора выполнен вход в систему VyOS под учётной записью `vyos`. Далее система установлена на диск с использованием стандартных параметров установки, после чего маршрутизатор был перезагружен.

8. После перезагрузки выполнен переход в режим конфигурирования. На маршрутизаторе задано имя `msk-elsaiedadel-gw-01`, а на интерфейсе `eth0` настроен IP-адрес `192.168.1.1/24`. Изменения применены и сохранены в конфигурации. После этого выполнен просмотр информации об интерфейсах маршрутизатора.

   ![Настройка интерфейса и имени маршрутизатора VyOS](Screenshot_17.png){ #fig:026 width=80% }

9. Для проверки сетевой связности с оконечного устройства `PC1-elsaiedadel` выполнена отправка ICMP эхо-запросов на адрес маршрутизатора `192.168.1.1`. Получены корректные ответы без потерь пакетов, что подтверждает работоспособность соединения.

   ![Проверка связи между PC и маршрутизатором VyOS](Screenshot_18.png){ #fig:027 width=80% }

10. В окне Wireshark проанализирован захваченный трафик. Зафиксированы ARP-запросы для определения MAC-адреса маршрутизатора, а также ICMP Echo Request и Echo Reply сообщения между оконечным устройством и маршрутизатором. Анализ пакетов подтверждает корректную работу протоколов ARP и ICMP.

11. По завершении анализа захват пакетов в Wireshark был остановлен. Все устройства в проекте корректно остановлены, работа с GNS3 завершена.

# Заключение

В ходе выполнения лабораторной работы было выполнено моделирование простых локальных сетей в среде GNS3 с использованием коммутатора Ethernet, маршрутизаторов FRR и VyOS, а также виртуальных оконечных устройств VPCS. На практике отработаны базовые принципы построения сетевых топологий, настройки IP-адресации и организации сетевого взаимодействия между узлами.

В процессе работы произведена настройка сетевых интерфейсов оконечных устройств и маршрутизаторов, проверена корректность заданных параметров и обеспечена успешная передача данных между элементами сети. С помощью анализатора пакетов Wireshark выполнен захват и детальный анализ сетевого трафика, что позволило изучить механизмы работы протоколов ARP и ICMP, а также особенности передачи эхо-запросов в различных режимах.

Результаты экспериментов подтвердили корректность выполненных конфигураций и наглядно продемонстрировали процессы установления сетевого взаимодействия на канальном и сетевом уровнях модели OSI. Полученные практические навыки могут быть использованы при проектировании, настройке и диагностике локальных сетей и сетевых устройств.
